language: python
matrix:
  include:
  - env: TOXENV=py27-dj19
    python: 2.7
  - env: TOXENV=py34-dj19
    python: 3.4
  - env: TOXENV=py35-dj19
    python: 3.5
  - env: TOXENV=py27-dj110
    python: 2.7
  - env: TOXENV=py34-dj110
    python: 3.4
  - env: TOXENV=py35-dj110
    python: 3.5
  - env: TOXENV=py27-dj111
    python: 2.7
  - env: TOXENV=py34-dj111
    python: 3.4
  - env: TOXENV=py35-dj111
    python: 3.5
  - env: TOXENV=py36-dj111
    python: 3.6
  - env: TOXENV=py34-dj20
    python: 3.4
  - env: TOXENV=py35-dj20
    python: 3.5
  - env: TOXENV=py36-dj20
    python: 3.6
install:
- pip install coverage codecov coveralls tox
script:
- "./bin/fake-server &"
- tox
after_success:
- coveralls
- codecov
deploy:
  provider: pypi
  user: apsl
  password:
    secure: U6BAeB3377GQ0hCHVM+iZI300R6VV9/nz3muuMUadO0KcNj7UKMgAQ8y44/wgKHQyXJKPpEsUM7f/5SDIf8I6um2g2rkDHbFXeBih/jDR65Rm2MbyPhD3qA8qrsxupq2vroG+aCAxaOUI1m/4EW/Ha/5YNGV1ExugLoukrulk6Zg10AOkWQ4cJFUqYtUw420TQWSL8jek/57f634fL/xz5ejEy7BuiyaKa9D3GjGFBFj/uUA2nvF7r1msX9xVpLMkpAuJW5vC1h6f56Q8RAe4Sqd2BtXfX1lXEYj/nx7DVM1ohKY+TLF2DGd/8zA5A2vQrUA3UnBxRa8k9GXEftpx21GtvdYexjKRIQnU2eGrvZSIoPF5xNq00BHVeqjLkUNL1OHYWfDCfcq9aW0v2HDxHnzB2QttvS5ed3l2el2C6+FNXkaDfEXtyAUlpj9OPV+qoWt9TOTEFPYuKL7SFL2Q2ySIXg22dx084oodCXRg919McH2+A9Z8CSaxaU6jiVQ8LGAdNnVgnKTBzaV1g/livP+f4FKHHoZofV0rFMwsF7eIQgNK0W5oX4SajqNugP3VzRqJpvp3oAeIKi8JMO4gXGjsTjexNUi6b+j9ByGcrwfaQmmLlie9yuSABHVH0mx0ztASv3CiCdKyzS6C4pKSGUm1WxSBQOyjuCCqYf8f2w=
  on:
    tags: true
    branch: master
    python: 3.5
  distributions: sdist bdist_wheel